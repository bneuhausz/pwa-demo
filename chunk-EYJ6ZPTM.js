import{a as v}from"./chunk-DI6KMG7F.js";import{c as f,k as h}from"./chunk-OCMXFDO5.js";import{Ia as b,M as u,Ma as n,Na as o,Pa as l,R as s,Ra as r,ra as m,za as d}from"./chunk-5MFH4WBZ.js";var S={vapidPublicKey:"BAd3zeYMcU27ACaDGxI2KIqk0vCVnwyghdvAMcQpfGwEFPgGu-BtwyOZElV8OEluzNl-trkbytbA4w2wf6Gsqm8"};var c=class i{http=s(f);addPushSubscriber(e){return this.http.post("/api/subscribe",e)}sendPushNotification(){return this.http.post("/api/send-push",null)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var p=class i{swPush=s(v);notificationsService=s(c);sub;subscribe(){this.swPush.isEnabled&&this.swPush.requestSubscription({serverPublicKey:S.vapidPublicKey}).then(e=>{this.sub=e,this.notificationsService.addPushSubscriber(e).subscribe(t=>console.log(t))}).catch(e=>console.error("Subscription failed:",e))}sendNotification(){console.log("Sending notification..."),this.notificationsService.sendPushNotification().subscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=d({type:i,selectors:[["app-home"]],decls:10,vars:1,consts:[["routerLink","/posts"],[3,"click","disabled"],[3,"click"],["routerLink","/data-matrix-scanner"]],template:function(t,a){t&1&&(n(0,"h1"),r(1,"Prerendered Home"),o(),n(2,"button",0),r(3,"Posts"),o(),n(4,"button",1),l("click",function(){return a.subscribe()}),r(5,"Subscribe"),o(),n(6,"button",2),l("click",function(){return a.sendNotification()}),r(7,"Send Notification"),o(),n(8,"button",3),r(9,"Scanner"),o()),t&2&&(m(4),b("disabled",a.sub))},dependencies:[h],encapsulation:2})};export{p as default};
